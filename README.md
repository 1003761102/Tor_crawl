Tor多ip代理爬虫
===
Tor是什么
---
Tor是互联网上用于保护您隐私最有力的工具之一，但是时至今日仍有许多人往往认为Tor是一个终端加密工具。Tor的工作原理是这样的：当你通过Tor发送邮件时， tor会使用一种称为“洋葱路由”的加密技术通过网络随机生成的过程传送邮件。这有点像在一叠信中放了一封密信。网络中的每个节点都会解密消息（打开的最外信封），然后发送内部加密的内容（内密封的信封）至其下一个地址。这导致如果单看一个节点是看不了信的全部内容，并且该消息的传送路径难以追踪。Tor在世界各地有大量服务器，因而具有大量IP，匿名性非常高。然而Tor网速较慢，爬取网页速率低，因而基于Tor绕ip爬虫适用于对速率和数据量要求不高的用户。
本文将以windows为例，演示通过Tor进行代理爬虫。

一、	环境准备
---

1.	Shadowsock

翻墙梯子很关键，不然Tor连接不上。买好或自己搭建好梯子后，打开Shadowsock。填写相关信息，并选择全局代理，启动系统代理，代理端口设为1080。

2.	Vidalia Bridge Bundle

点击下载（http://www.download82.com/get/download/windows/vidalia/），安装好之后，选择中文简体。然后进入设定>网络>勾选我使用代理服务器（地址：127.0.0.1，端口：1080）。

点击高级>使用TCP连接（127.0.0.1:9150）

确定后点击启动Tor。

二、	python使用Tor代理
---

代码见tor.py。http://api.ipify.org/?format=json为ip检查网站，运行结果如下所示。

Check ip address*********************************************

Before tor proxies:

My ip is: {"ip":"124.225.152.105"}

After tor proxies:

The tor ip is: {"ip":"51.15.39.2"}
 
